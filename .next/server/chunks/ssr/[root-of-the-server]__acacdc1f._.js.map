{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/utils/pdas.ts"],"sourcesContent":["import { PublicKey } from '@solana/web3.js';\nimport { BN } from '@project-serum/anchor';\nimport { PROGRAM_ID } from './constants';\n\n// Get Poll PDA\nexport const getPollPDA = (pollId: BN): PublicKey => {\n  const pollIdBuffer = pollId.toArrayLike(Buffer, 'le', 8);\n  const [pda] = PublicKey.findProgramAddressSync(\n    [pollIdBuffer],\n    PROGRAM_ID\n  );\n  return pda;\n};\n\n// Get Candidate PDA\nexport const getCandidatePDA = (pollId: BN, candidateName: string): PublicKey => {\n  const pollIdBuffer = pollId.toArrayLike(Buffer, 'le', 8);\n  const [pda] = PublicKey.findProgramAddressSync(\n    [pollIdBuffer, Buffer.from(candidateName)],\n    PROGRAM_ID\n  );\n  return pda;\n};\n\n// Get Voter Record PDA\nexport const getVoterRecordPDA = (\n  pollId: BN, \n  candidateName: string, \n  voterPubkey: PublicKey\n): PublicKey => {\n  const pollIdBuffer = pollId.toArrayLike(Buffer, 'le', 8);\n  const [pda] = PublicKey.findProgramAddressSync(\n    [pollIdBuffer, Buffer.from(candidateName), voterPubkey.toBuffer()],\n    PROGRAM_ID\n  );\n  return pda;\n};"],"names":[],"mappings":";;;;;AAAA;AAEA;;;AAGO,MAAM,aAAa,CAAC;IACzB,MAAM,eAAe,OAAO,WAAW,CAAC,QAAQ,MAAM;IACtD,MAAM,CAAC,IAAI,GAAG,6JAAA,CAAA,YAAS,CAAC,sBAAsB,CAC5C;QAAC;KAAa,EACd,yHAAA,CAAA,aAAU;IAEZ,OAAO;AACT;AAGO,MAAM,kBAAkB,CAAC,QAAY;IAC1C,MAAM,eAAe,OAAO,WAAW,CAAC,QAAQ,MAAM;IACtD,MAAM,CAAC,IAAI,GAAG,6JAAA,CAAA,YAAS,CAAC,sBAAsB,CAC5C;QAAC;QAAc,OAAO,IAAI,CAAC;KAAe,EAC1C,yHAAA,CAAA,aAAU;IAEZ,OAAO;AACT;AAGO,MAAM,oBAAoB,CAC/B,QACA,eACA;IAEA,MAAM,eAAe,OAAO,WAAW,CAAC,QAAQ,MAAM;IACtD,MAAM,CAAC,IAAI,GAAG,6JAAA,CAAA,YAAS,CAAC,sBAAsB,CAC5C;QAAC;QAAc,OAAO,IAAI,CAAC;QAAgB,YAAY,QAAQ;KAAG,EAClE,yHAAA,CAAA,aAAU;IAEZ,OAAO;AACT","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/hooks/useVotingProgram.ts"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { useAnchorWallet, useConnection, useWallet } from '@solana/wallet-adapter-react';\nimport { Program, AnchorProvider, BN, Idl } from '@project-serum/anchor';\nimport { SystemProgram } from '@solana/web3.js';\nimport { PollAccount, CandidateAccount, StatusMessage } from '@/app/models/types';\nimport { PROGRAM_ID, NETWORK, ENDPOINT } from '@/app/utils/constants';\nimport { getPollPDA, getCandidatePDA, getVoterRecordPDA } from '@/app/utils/pdas';\n\n// Import the IDL directly\nimport { SolanaVotingApp } from '../../target/types/solana_voting_app';\nimport idlFile from '../../target/idl/solana_voting_app.json';\n\nexport const useVotingProgram = () => {\n  const { connection } = useConnection();\n  const { publicKey, connected } = useWallet();\n  const wallet = useAnchorWallet();\n\n  const [program, setProgram] = useState<Program | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [status, setStatus] = useState<StatusMessage | null>(null);\n  const [networkMismatch, setNetworkMismatch] = useState(false);\n\n  // Network check\n  useEffect(() => {\n    const checkNetwork = async () => {\n      if (!wallet || !connected) {\n        setStatus({\n          message: \"Please connect your wallet\",\n          isError: false\n        });\n        return;\n      }\n\n      try {\n        console.log(`Expected network: ${NETWORK}, endpoint: ${ENDPOINT}`);\n\n        try {\n          // Check if the Solana validator is running\n          const blockHash = await connection.getLatestBlockhash();\n          console.log(\"Successfully connected to Solana network\");\n          console.log(\"Latest blockhash:\", blockHash.blockhash);\n          \n          // Additional check to verify validator responsiveness\n          const balance = await connection.getBalance(publicKey);\n          console.log(\"Wallet balance:\", balance / 1000000000, \"SOL\");\n          \n          setNetworkMismatch(false);\n        } catch (err) {\n          console.error(\"Network connection error:\", err);\n          setNetworkMismatch(true);\n          \n          if (NETWORK === 'localnet') {\n            setStatus({\n              message: `Connection to ${NETWORK} failed. Make sure your local Solana validator is running with \"solana-test-validator\".`,\n              isError: true\n            });\n          } else {\n            setStatus({\n              message: `Connection to ${NETWORK} failed. Please check your wallet and network settings.`,\n              isError: true\n            });\n          }\n        }\n      } catch (err) {\n        console.error(\"Network check error:\", err);\n      }\n    };\n\n    if (connected) {\n      checkNetwork();\n    }\n  }, [connection, wallet, connected, publicKey]);\n\n  // Program initialization\n  useEffect(() => {\n    const initializeProgram = async () => {\n      if (!wallet || networkMismatch) {\n        setProgram(null);\n        return;\n      }\n\n      try {\n        console.log(\"Initializing program with wallet:\", wallet.publicKey.toString());\n        console.log(\"Program ID:\", PROGRAM_ID.toString());\n\n        // Create provider with more lenient settings for local development\n        const provider = new AnchorProvider(\n          connection,\n          wallet,\n          {\n            commitment: 'processed',\n            preflightCommitment: 'processed',\n            skipPreflight: true\n          }\n        );\n        \n        // Log connection and wallet info for debugging\n        console.log(\"Connection endpoint:\", connection.rpcEndpoint);\n        console.log(\"Wallet public key:\", wallet.publicKey.toString());\n\n        try {\n          const programInstance = new Program<SolanaVotingApp>(\n            idl as any,\n            PROGRAM_ID,\n            provider\n          );\n\n          // Log available methods to verify structure\n          console.log(\"Available methods:\", Object.keys(programInstance.methods));\n          \n          console.log(\"Program initialized successfully\");\n          setProgram(programInstance);\n          setStatus({\n            message: \"Connected to Solana program\",\n            isError: false\n          });\n        } catch (err) {\n          console.error(\"Error initializing program:\", err);\n          throw new Error(`Program initialization failed: ${err}`);\n        }\n      } catch (err) {\n        console.error('Failed to initialize program:', err);\n        setStatus({\n          message: `Failed to initialize program: ${err}`,\n          isError: true\n        });\n      }\n    };\n\n    initializeProgram();\n  }, [connection, wallet, networkMismatch]);\n\n  // Fetch all polls\n  const fetchPolls = async (): Promise<PollAccount[]> => {\n    if (!program) return [];\n\n    setLoading(true);\n    setStatus(null);\n\n    try {\n      // Fetch all poll accounts\n      const pollAccounts = await program.account.poll.all();\n      console.log(\"Raw poll accounts:\", pollAccounts);\n\n      // Transform the data\n      return pollAccounts.map(item => {\n        const account = item.account as any;\n        return {\n          publicKey: item.publicKey,\n          account: {\n            pollId: new BN(account.poll_id?.toString() || '0'),\n            description: account.description || '',\n            pollStartTime: new BN(account.poll_start_time?.toString() || '0'),\n            pollEndTime: new BN(account.poll_end_time?.toString() || '0'),\n            candidateAmount: account.candidate_amount || 0\n          }\n        };\n      });\n    } catch (err) {\n      console.error('Error fetching polls:', err);\n      setStatus({\n        message: `Failed to fetch polls: ${err}`,\n        isError: true\n      });\n      return [];\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Fetch candidates for a specific poll\n  const fetchCandidates = async (pollId: BN): Promise<CandidateAccount[]> => {\n    if (!program) return [];\n\n    setLoading(true);\n    setStatus(null);\n\n    try {\n      // Fetch all candidates\n      const allCandidates = await program.account.candidate.all();\n      console.log(\"Raw candidate accounts:\", allCandidates);\n\n      // Transform the candidates\n      return allCandidates.map(item => {\n        const account = item.account as any;\n        return {\n          publicKey: item.publicKey,\n          account: {\n            candidateName: account.candidate_name || '',\n            candidateVotes: new BN(account.candidate_votes?.toString() || '0')\n          }\n        };\n      });\n    } catch (err) {\n      console.error('Error fetching candidates:', err);\n      setStatus({\n        message: `Failed to fetch candidates: ${err}`,\n        isError: true\n      });\n      return [];\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Create a new poll with optional retry for seed constraint errors\n  const createPoll = async (description: string, retryCount = 0): Promise<boolean> => {\n    if (!program || !wallet) return false;\n    // Limit retries to avoid infinite loops\n    if (retryCount > 3) {\n      setStatus({\n        message: 'Failed to create poll after multiple attempts. Please try again later.',\n        isError: true\n      });\n      return false;\n    }\n\n    setLoading(true);\n    setStatus(null);\n\n    try {\n      // Generate a unique poll ID using current timestamp + random suffix to avoid collisions\n      const timestamp = Date.now().toString();\n      // Add a small random number to ensure uniqueness, especially on retries\n      const randomSuffix = retryCount > 0 ? Math.floor(Math.random() * 1000) : 0;\n      const pollIdStr = timestamp + randomSuffix;\n      console.log(`Using poll ID (attempt ${retryCount + 1}):`, pollIdStr);\n      const pollId = new BN(pollIdStr);\n      \n      // Log the BN value and its buffer representation to debug seed issues\n      console.log(\"Poll ID as BN:\", pollId.toString());\n      console.log(\"Poll ID as Buffer:\", pollId.toArrayLike(Buffer, 'le', 8).toString('hex'));\n\n      // Set poll duration - from now to 7 days in the future\n      const now = Math.floor(Date.now() / 1000);\n      const oneWeekFromNow = now + (7 * 24 * 60 * 60);\n\n      // Get the PDA for the poll\n      const pollPDA = getPollPDA(pollId);\n\n      console.log(\"Creating poll with PDA:\", pollPDA.toString());\n      console.log(\"Parameters:\", {\n        pollId: pollId.toString(),\n        description,\n        startTime: now,\n        endTime: oneWeekFromNow\n      });\n\n      // First, simulate the transaction to get detailed error information\n      try {\n        const simulation = await program.methods.initialize_poll(\n          pollId,\n          description,\n          new BN(now),\n          new BN(oneWeekFromNow)\n        )\n          .accounts({\n            signer: wallet.publicKey,\n            poll: pollPDA,\n            system_program: SystemProgram.programId,\n          })\n          .simulate();\n        \n        console.log(\"Simulation successful:\", simulation);\n      } catch (simErr) {\n        console.error(\"Simulation error:\", simErr);\n        // Log but continue to try the actual transaction\n      }\n      \n      // Use the exact method name as it appears in the IDL (initialize_poll)\n      const tx = await program.methods.initialize_poll(\n        pollId,\n        description,\n        new BN(now),\n        new BN(oneWeekFromNow)\n      )\n        .accounts({\n          signer: wallet.publicKey,\n          poll: pollPDA,\n          system_program: SystemProgram.programId,\n        })\n        .rpc({ \n          skipPreflight: true,\n          commitment: 'processed',\n          maxRetries: 5,\n        })\n        .catch(err => {\n          console.error(\"Detailed error:\", err);\n          if (err.logs) {\n            console.error(\"Transaction logs:\", err.logs);\n          }\n          throw err;\n        });\n\n      console.log(\"Poll created! Transaction signature:\", tx);\n\n      setStatus({\n        message: 'Poll created successfully!',\n        isError: false\n      });\n      return true;\n    } catch (err) {\n      console.error('Error creating poll:', err);\n      \n      // Log more details about the error to assist with debugging\n      if (err instanceof Error) {\n        console.error('Error message:', err.message);\n        console.error('Error stack:', err.stack);\n      }\n      \n      if (err.toString().includes('429')) {\n        setStatus({\n          message: 'Network is busy. Please try again in a few moments.',\n          isError: true\n        });\n      } else if (err.toString().includes('Not found')) {\n        setStatus({\n          message: 'Method not found in program. Check IDL structure and method name.',\n          isError: true\n        });\n      } else if (err.toString().includes('seed constraint was violated') || err.toString().includes('seeds constraint')) {\n        // Handle seed constraint violations - this happens when a poll with the same ID already exists\n        console.error(\"Seed constraint violation - poll ID already exists\");\n        \n        // Automatically retry with a different poll ID\n        console.log(`Retrying with a new poll ID (attempt ${retryCount + 1})`);\n        setLoading(false);\n        return createPoll(description, retryCount + 1);\n        \n      } else if (err.toString().includes('TransactionExpiredTimeoutError')) {\n        // For local validator, the transaction might still have succeeded despite the timeout\n        setStatus({\n          message: 'Transaction timed out but may have succeeded. Check \"fetchPolls\" to verify, or try again.',\n          isError: true\n        });\n        \n        // Try to fetch polls to see if the operation succeeded despite timeout\n        setTimeout(() => {\n          fetchPolls().then(polls => {\n            if (polls.length > 0) {\n              console.log(\"Found polls after timeout, transaction might have succeeded:\", polls);\n              setStatus({\n                message: 'Poll may have been created successfully despite timeout. See poll list.',\n                isError: false\n              });\n            }\n          });\n        }, 3000);\n      } else {\n        setStatus({\n          message: `Failed to create poll: ${err}`,\n          isError: true\n        });\n      }\n\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Add a candidate to a poll\n  const addCandidate = async (pollId: BN, candidateName: string): Promise<boolean> => {\n    if (!program || !wallet) return false;\n\n    setLoading(true);\n    setStatus(null);\n\n    try {\n      // Get the PDAs\n      const pollPDA = getPollPDA(pollId);\n      const candidatePDA = getCandidatePDA(pollId, candidateName);\n\n      console.log(\"Adding candidate to poll:\", pollPDA.toString());\n      console.log(\"Candidate PDA:\", candidatePDA.toString());\n      console.log(\"Parameters:\", {\n        pollId: pollId.toString(),\n        candidateName\n      });\n\n      // Use the exact method name as it appears in the IDL (initialize_candidate)\n      const tx = await program.methods\n        .initialize_candidate(\n          pollId,\n          candidateName\n        )\n        .accounts({\n          signer: wallet.publicKey,\n          poll: pollPDA,\n          candidate: candidatePDA,\n          system_program: SystemProgram.programId,\n        })\n        .rpc();\n\n      console.log(\"Candidate added! Transaction signature:\", tx);\n\n      setStatus({\n        message: 'Candidate added successfully!',\n        isError: false\n      });\n      return true;\n    } catch (err) {\n      console.error('Error adding candidate:', err);\n\n      if (err.toString().includes('429')) {\n        setStatus({\n          message: 'Network is busy. Please try again in a few moments.',\n          isError: true\n        });\n      } else {\n        setStatus({\n          message: `Failed to add candidate: ${err}`,\n          isError: true\n        });\n      }\n\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Vote for a candidate\n  const vote = async (pollId: BN, candidateName: string): Promise<boolean> => {\n    if (!program || !wallet) return false;\n\n    setLoading(true);\n    setStatus(null);\n\n    try {\n      // Get the PDAs\n      const pollPDA = getPollPDA(pollId);\n      const candidatePDA = getCandidatePDA(pollId, candidateName);\n      const voterRecordPDA = getVoterRecordPDA(pollId, candidateName, wallet.publicKey);\n\n      console.log(\"Voting in poll:\", pollPDA.toString());\n      console.log(\"For candidate:\", candidatePDA.toString());\n      console.log(\"Voter record PDA:\", voterRecordPDA.toString());\n      console.log(\"Parameters:\", {\n        pollId: pollId.toString(),\n        candidateName\n      });\n\n      // Call the vote instruction with exact method name from IDL\n      const tx = await program.methods\n        .vote(\n          pollId,\n          candidateName\n        )\n        .accounts({\n          signer: wallet.publicKey,\n          poll: pollPDA,\n          candidate: candidatePDA,\n          voter_record: voterRecordPDA,\n          system_program: SystemProgram.programId,\n        })\n        .rpc();\n\n      console.log(\"Vote recorded! Transaction signature:\", tx);\n\n      setStatus({\n        message: 'Vote recorded successfully!',\n        isError: false\n      });\n      return true;\n    } catch (err) {\n      console.error('Error voting:', err);\n\n      if (err.toString().includes('429') || err.toString().toLowerCase().includes('rate limit')) {\n        setStatus({\n          message: 'The network is busy. Please try again in a few seconds.',\n          isError: true\n        });\n      } else {\n        setStatus({\n          message: `Failed to vote: ${err}`,\n          isError: true\n        });\n      }\n\n      return false;\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return {\n    program,\n    loading,\n    status,\n    fetchPolls,\n    fetchCandidates,\n    createPoll,\n    addCandidate,\n    vote,\n    networkMismatch\n  };\n};\n\nexport default useVotingProgram;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/components/CreatePollForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport useVotingProgram from '@/app/hooks/useVotingProgram';\nimport { MAX_DESCRIPTION_LENGTH } from '@/app/utils/constants';\n\ninterface CreatePollFormProps {\n  onPollCreated: () => void;\n}\n\nconst CreatePollForm = ({ onPollCreated }: CreatePollFormProps) => {\n  const [description, setDescription] = useState('');\n  const { createPoll, loading, status } = useVotingProgram();\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!description.trim()) {\n      return;\n    }\n    \n    const success = await createPoll(description);\n    \n    if (success) {\n      setDescription('');\n      setTimeout(() => {\n        onPollCreated();\n      }, 2000);\n    }\n  };\n  \n  return (\n    <div className=\"bg-slate-800 p-4 rounded-lg mb-6\">\n      <h3 className=\"text-xl font-bold mb-4\">Create New Poll</h3>\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-4\">\n          <label htmlFor=\"description\" className=\"block mb-2\">\n            Poll Description\n          </label>\n          <textarea\n            id=\"description\"\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n            className=\"w-full p-2 bg-slate-700 rounded border border-slate-600\"\n            placeholder=\"e.g., Which Solana project should we build next?\"\n            maxLength={MAX_DESCRIPTION_LENGTH}\n            rows={3}\n            required\n          />\n          <div className=\"text-xs text-slate-400 mt-1\">\n            {description.length}/{MAX_DESCRIPTION_LENGTH}\n          </div>\n        </div>\n        \n        <button\n          type=\"submit\"\n          disabled={loading || !description.trim()}\n          className=\"bg-purple-600 hover:bg-purple-700 text-white py-2 px-4 rounded disabled:opacity-50\"\n        >\n          {loading ? 'Creating...' : 'Create Poll'}\n        </button>\n      </form>\n      \n      {status && (\n        <div className={`mt-4 p-3 rounded ${status.isError ? 'bg-red-900/30 text-red-300' : 'bg-green-900/30 text-green-300'}`}>\n          {status.message}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CreatePollForm;"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAUA,MAAM,iBAAiB,CAAC,EAAE,aAAa,EAAuB;IAC5D,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,UAAgB,AAAD;IAEvD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,YAAY,IAAI,IAAI;YACvB;QACF;QAEA,MAAM,UAAU,MAAM,WAAW;QAEjC,IAAI,SAAS;YACX,eAAe;YACf,WAAW;gBACT;YACF,GAAG;QACL;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BAEvC,8OAAC;gBAAK,UAAU;;kCACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,SAAQ;gCAAc,WAAU;0CAAa;;;;;;0CAGpD,8OAAC;gCACC,IAAG;gCACH,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;gCACV,aAAY;gCACZ,WAAW,yHAAA,CAAA,yBAAsB;gCACjC,MAAM;gCACN,QAAQ;;;;;;0CAEV,8OAAC;gCAAI,WAAU;;oCACZ,YAAY,MAAM;oCAAC;oCAAE,yHAAA,CAAA,yBAAsB;;;;;;;;;;;;;kCAIhD,8OAAC;wBACC,MAAK;wBACL,UAAU,WAAW,CAAC,YAAY,IAAI;wBACtC,WAAU;kCAET,UAAU,gBAAgB;;;;;;;;;;;;YAI9B,wBACC,8OAAC;gBAAI,WAAW,CAAC,iBAAiB,EAAE,OAAO,OAAO,GAAG,+BAA+B,kCAAkC;0BACnH,OAAO,OAAO;;;;;;;;;;;;AAKzB;uCAEe","debugId":null}},
    {"offset": {"line": 606, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/components/AddCandidateForm.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { BN } from '@project-serum/anchor';\nimport useVotingProgram from '@/app/hooks/useVotingProgram';\nimport { MAX_CANDIDATE_NAME_LENGTH } from '@/app/utils/constants';\n\ninterface AddCandidateFormProps {\n  pollId: BN;\n  onCandidateAdded: () => void;\n}\n\nconst AddCandidateForm = ({ pollId, onCandidateAdded }: AddCandidateFormProps) => {\n  const [candidateName, setCandidateName] = useState('');\n  const { addCandidate, loading, status } = useVotingProgram();\n  \n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!candidateName.trim()) {\n      return;\n    }\n    \n    const success = await addCandidate(pollId, candidateName);\n    \n    if (success) {\n      setCandidateName('');\n      setTimeout(() => {\n        onCandidateAdded();\n      }, 2000);\n    }\n  };\n  \n  return (\n    <div className=\"bg-slate-900 p-4 rounded-lg mb-4\">\n      <h4 className=\"text-lg font-bold mb-3\">Add Project Option</h4>\n      \n      <form onSubmit={handleSubmit}>\n        <div className=\"mb-3\">\n          <label htmlFor=\"candidateName\" className=\"block mb-1 text-sm\">\n            Project Name\n          </label>\n          <input\n            id=\"candidateName\"\n            type=\"text\"\n            value={candidateName}\n            onChange={(e) => setCandidateName(e.target.value)}\n            className=\"w-full p-2 bg-slate-700 rounded border border-slate-600\"\n            placeholder=\"e.g., Solana DAO, Beer Token\"\n            maxLength={MAX_CANDIDATE_NAME_LENGTH}\n            required\n          />\n          <div className=\"text-xs text-slate-400 mt-1\">\n            {candidateName.length}/{MAX_CANDIDATE_NAME_LENGTH}\n          </div>\n        </div>\n        \n        <button\n          type=\"submit\"\n          disabled={loading || !candidateName.trim()}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white py-1.5 px-3 rounded text-sm disabled:opacity-50\"\n        >\n          {loading ? 'Adding...' : 'Add Project'}\n        </button>\n      </form>\n      \n      {status && (\n        <div className={`mt-3 p-2 rounded text-sm ${status.isError ? 'bg-red-900/30 text-red-300' : 'bg-green-900/30 text-green-300'}`}>\n          {status.message}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default AddCandidateForm;"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AALA;;;;;AAYA,MAAM,mBAAmB,CAAC,EAAE,MAAM,EAAE,gBAAgB,EAAyB;IAC3E,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACnD,MAAM,EAAE,YAAY,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,UAAgB,AAAD;IAEzD,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAEhB,IAAI,CAAC,cAAc,IAAI,IAAI;YACzB;QACF;QAEA,MAAM,UAAU,MAAM,aAAa,QAAQ;QAE3C,IAAI,SAAS;YACX,iBAAiB;YACjB,WAAW;gBACT;YACF,GAAG;QACL;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAyB;;;;;;0BAEvC,8OAAC;gBAAK,UAAU;;kCACd,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAM,SAAQ;gCAAgB,WAAU;0CAAqB;;;;;;0CAG9D,8OAAC;gCACC,IAAG;gCACH,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;gCAChD,WAAU;gCACV,aAAY;gCACZ,WAAW,yHAAA,CAAA,4BAAyB;gCACpC,QAAQ;;;;;;0CAEV,8OAAC;gCAAI,WAAU;;oCACZ,cAAc,MAAM;oCAAC;oCAAE,yHAAA,CAAA,4BAAyB;;;;;;;;;;;;;kCAIrD,8OAAC;wBACC,MAAK;wBACL,UAAU,WAAW,CAAC,cAAc,IAAI;wBACxC,WAAU;kCAET,UAAU,cAAc;;;;;;;;;;;;YAI5B,wBACC,8OAAC;gBAAI,WAAW,CAAC,yBAAyB,EAAE,OAAO,OAAO,GAAG,+BAA+B,kCAAkC;0BAC3H,OAAO,OAAO;;;;;;;;;;;;AAKzB;uCAEe","debugId":null}},
    {"offset": {"line": 730, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/components/CandidateList.tsx"],"sourcesContent":["'use client';\n\nimport { useState } from 'react';\nimport { BN } from '@project-serum/anchor';\nimport { CandidateAccount } from '@/app/models/types';\nimport useVotingProgram from '@/app/hooks/useVotingProgram';\n\ninterface CandidateListProps {\n  pollId: BN;\n  candidates: CandidateAccount[];\n  isActive: boolean;\n  onVoted: () => void;\n}\n\nconst CandidateList = ({ pollId, candidates, isActive, onVoted }: CandidateListProps) => {\n  const { vote, loading, status } = useVotingProgram();\n  const [votingFor, setVotingFor] = useState<string | null>(null);\n  \n  const handleVote = async (candidateName: string) => {\n    setVotingFor(candidateName);\n    const success = await vote(pollId, candidateName);\n    if (success) {\n      setTimeout(() => {\n        onVoted();\n        setVotingFor(null);\n      }, 2000);\n    } else {\n      setVotingFor(null);\n    }\n  };\n  \n  if (candidates.length === 0) {\n    return <p className=\"text-slate-400 text-center py-4\">No project options added yet.</p>;\n  }\n  \n  return (\n    <div>\n      <ul className=\"space-y-2\">\n        {candidates.map((candidate) => (\n          <li \n            key={candidate.account.candidateName} \n            className=\"bg-slate-700 p-3 rounded-lg flex justify-between items-center\"\n          >\n            <div>\n              <h5 className=\"font-medium\">{candidate.account.candidateName}</h5>\n              <p className=\"text-sm text-slate-300\">Votes: {candidate.account.candidateVotes.toString()}</p>\n            </div>\n            \n            {isActive && (\n              <button\n                onClick={() => handleVote(candidate.account.candidateName)}\n                disabled={loading || votingFor !== null}\n                className=\"bg-green-600 hover:bg-green-700 text-white py-1 px-3 rounded-lg text-sm disabled:opacity-50\"\n              >\n                {votingFor === candidate.account.candidateName ? 'Voting...' : 'Vote'}\n              </button>\n            )}\n          </li>\n        ))}\n      </ul>\n      \n      {status && votingFor && (\n        <div className={`mt-3 p-2 rounded text-sm ${status.isError ? 'bg-red-900/30 text-red-300' : 'bg-green-900/30 text-green-300'}`}>\n          {status.message}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default CandidateList;"],"names":[],"mappings":";;;;AAEA;AAGA;AALA;;;;AAcA,MAAM,gBAAgB,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAsB;IAClF,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,UAAgB,AAAD;IACjD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IAE1D,MAAM,aAAa,OAAO;QACxB,aAAa;QACb,MAAM,UAAU,MAAM,KAAK,QAAQ;QACnC,IAAI,SAAS;YACX,WAAW;gBACT;gBACA,aAAa;YACf,GAAG;QACL,OAAO;YACL,aAAa;QACf;IACF;IAEA,IAAI,WAAW,MAAM,KAAK,GAAG;QAC3B,qBAAO,8OAAC;YAAE,WAAU;sBAAkC;;;;;;IACxD;IAEA,qBACE,8OAAC;;0BACC,8OAAC;gBAAG,WAAU;0BACX,WAAW,GAAG,CAAC,CAAC,0BACf,8OAAC;wBAEC,WAAU;;0CAEV,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAe,UAAU,OAAO,CAAC,aAAa;;;;;;kDAC5D,8OAAC;wCAAE,WAAU;;4CAAyB;4CAAQ,UAAU,OAAO,CAAC,cAAc,CAAC,QAAQ;;;;;;;;;;;;;4BAGxF,0BACC,8OAAC;gCACC,SAAS,IAAM,WAAW,UAAU,OAAO,CAAC,aAAa;gCACzD,UAAU,WAAW,cAAc;gCACnC,WAAU;0CAET,cAAc,UAAU,OAAO,CAAC,aAAa,GAAG,cAAc;;;;;;;uBAd9D,UAAU,OAAO,CAAC,aAAa;;;;;;;;;;YAqBzC,UAAU,2BACT,8OAAC;gBAAI,WAAW,CAAC,yBAAyB,EAAE,OAAO,OAAO,GAAG,+BAA+B,kCAAkC;0BAC3H,OAAO,OAAO;;;;;;;;;;;;AAKzB;uCAEe","debugId":null}},
    {"offset": {"line": 842, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/components/PollCard.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { PollAccount, CandidateAccount } from '@/app/models/types';\nimport AddCandidateForm from './AddCandidateForm';\nimport CandidateList from './CandidateList';\nimport useVotingProgram from '@/app/hooks/useVotingProgram';\nimport { BN } from '@project-serum/anchor';\n\ninterface PollCardProps {\n  poll: PollAccount;\n  onRefresh: () => void;\n}\n\nconst PollCard = ({ poll, onRefresh }: PollCardProps) => {\n  const [candidates, setCandidates] = useState<CandidateAccount[]>([]);\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [loading, setLoading] = useState(false);\n  \n  const { fetchCandidates } = useVotingProgram();\n  \n  // Check if poll is active\n  const now = Math.floor(Date.now() / 1000);\n  const isActive = poll.account.pollStartTime.lte(new BN(now)) && \n                   poll.account.pollEndTime.gte(new BN(now));\n  \n  // Load candidates for this poll\n  const loadCandidates = async () => {\n    setLoading(true);\n    const pollCandidates = await fetchCandidates(poll.account.pollId);\n    setCandidates(pollCandidates);\n    setLoading(false);\n  };\n  \n  useEffect(() => {\n    loadCandidates();\n  }, [poll]);\n  \n  const formatDate = (timestamp: BN) => {\n    return new Date(timestamp.toNumber() * 1000).toLocaleString();\n  };\n  \n  return (\n    <div className={`bg-slate-800 p-4 rounded-lg ${isActive ? 'border-l-4 border-green-500' : 'border-l-4 border-red-500 opacity-80'}`}>\n      <h3 className=\"text-xl font-bold mb-2\">{poll.account.description}</h3>\n      \n      <div className=\"text-sm text-slate-400 mb-4\">\n        <p>Status: {isActive ? 'Active' : 'Inactive'}</p>\n        <p>\n          Period: {formatDate(poll.account.pollStartTime)} to {formatDate(poll.account.pollEndTime)}\n        </p>\n      </div>\n      \n      {isActive && (\n        <div className=\"mb-4\">\n          <button\n            onClick={() => setShowAddForm(!showAddForm)}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white py-1.5 px-3 rounded-lg text-sm\"\n          >\n            {showAddForm ? 'Cancel' : 'Add Project Option'}\n          </button>\n          \n          {showAddForm && (\n            <AddCandidateForm \n              pollId={poll.account.pollId} \n              onCandidateAdded={() => {\n                setShowAddForm(false);\n                loadCandidates();\n              }} \n            />\n          )}\n        </div>\n      )}\n      \n      <div>\n        <h4 className=\"text-lg font-semibold mb-3\">Project Options:</h4>\n        \n        {loading ? (\n          <p className=\"text-center py-4 text-slate-400\">Loading candidates...</p>\n        ) : (\n          <CandidateList\n            pollId={poll.account.pollId}\n            candidates={candidates}\n            isActive={isActive}\n            onVoted={() => {\n              loadCandidates();\n              onRefresh();\n            }}\n          />\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default PollCard;"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AACA;AACA;AAAA;AAPA;;;;;;;AAcA,MAAM,WAAW,CAAC,EAAE,IAAI,EAAE,SAAS,EAAiB;IAClD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAsB,EAAE;IACnE,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,MAAM,EAAE,eAAe,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,UAAgB,AAAD;IAE3C,0BAA0B;IAC1B,MAAM,MAAM,KAAK,KAAK,CAAC,KAAK,GAAG,KAAK;IACpC,MAAM,WAAW,KAAK,OAAO,CAAC,aAAa,CAAC,GAAG,CAAC,IAAI,sKAAA,CAAA,KAAE,CAAC,SACtC,KAAK,OAAO,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,sKAAA,CAAA,KAAE,CAAC;IAErD,gCAAgC;IAChC,MAAM,iBAAiB;QACrB,WAAW;QACX,MAAM,iBAAiB,MAAM,gBAAgB,KAAK,OAAO,CAAC,MAAM;QAChE,cAAc;QACd,WAAW;IACb;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG;QAAC;KAAK;IAET,MAAM,aAAa,CAAC;QAClB,OAAO,IAAI,KAAK,UAAU,QAAQ,KAAK,MAAM,cAAc;IAC7D;IAEA,qBACE,8OAAC;QAAI,WAAW,CAAC,4BAA4B,EAAE,WAAW,gCAAgC,wCAAwC;;0BAChI,8OAAC;gBAAG,WAAU;0BAA0B,KAAK,OAAO,CAAC,WAAW;;;;;;0BAEhE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;;4BAAE;4BAAS,WAAW,WAAW;;;;;;;kCAClC,8OAAC;;4BAAE;4BACQ,WAAW,KAAK,OAAO,CAAC,aAAa;4BAAE;4BAAK,WAAW,KAAK,OAAO,CAAC,WAAW;;;;;;;;;;;;;YAI3F,0BACC,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,eAAe,CAAC;wBAC/B,WAAU;kCAET,cAAc,WAAW;;;;;;oBAG3B,6BACC,8OAAC,sIAAA,CAAA,UAAgB;wBACf,QAAQ,KAAK,OAAO,CAAC,MAAM;wBAC3B,kBAAkB;4BAChB,eAAe;4BACf;wBACF;;;;;;;;;;;;0BAMR,8OAAC;;kCACC,8OAAC;wBAAG,WAAU;kCAA6B;;;;;;oBAE1C,wBACC,8OAAC;wBAAE,WAAU;kCAAkC;;;;;6CAE/C,8OAAC,mIAAA,CAAA,UAAa;wBACZ,QAAQ,KAAK,OAAO,CAAC,MAAM;wBAC3B,YAAY;wBACZ,UAAU;wBACV,SAAS;4BACP;4BACA;wBACF;;;;;;;;;;;;;;;;;;AAMZ;uCAEe","debugId":null}},
    {"offset": {"line": 1003, "column": 0}, "map": {"version":3,"sources":["file:///Users/talgya/dev/solana/solana-voting-app/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { useWallet } from '@solana/wallet-adapter-react';\nimport { WalletMultiButton } from '@solana/wallet-adapter-react-ui';\nimport useVotingProgram from '@/app/hooks/useVotingProgram';\nimport { PollAccount } from '@/app/models/types';\nimport CreatePollForm from '@/app/components/CreatePollForm';\nimport PollCard from '@/app/components/PollCard';\n\nexport default function Home() {\n  const { publicKey } = useWallet();\n  const { fetchPolls, loading, status } = useVotingProgram();\n  \n  const [polls, setPolls] = useState<PollAccount[]>([]);\n  const [showCreateForm, setShowCreateForm] = useState(false);\n  \n  // Load polls when wallet connects\n  const loadPolls = async () => {\n    if (publicKey) {\n      const fetchedPolls = await fetchPolls();\n      setPolls(fetchedPolls);\n    }\n  };\n  \n  // Load polls on initial render and when wallet changes\n  useEffect(() => {\n    loadPolls();\n  }, [publicKey]);\n  \n  return (\n    <main className=\"flex min-h-screen flex-col py-8 bg-slate-900 text-white\">\n      <div className=\"w-full max-w-5xl mx-auto\">\n        <header className=\"flex flex-col md:flex-row justify-between items-start md:items-center mb-12 pb-6 border-b border-slate-700\">\n          <h1 className=\"text-3xl md:text-4xl font-bold mb-4 md:mb-0 bg-gradient-to-r from-purple-400 to-blue-500 text-transparent bg-clip-text\">\n            Solana Dev Meetup Voting\n          </h1>\n          <WalletMultiButton />\n        </header>\n        \n        <div className=\"mb-8\">\n          {publicKey ? (\n            <div className=\"flex justify-between items-center\">\n              <h2 className=\"text-2xl font-semibold\">\n                {polls.length > 0 ? 'Active Polls' : 'No Polls Found'}\n              </h2>\n              <button \n                className=\"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white py-2 px-4 rounded-lg\"\n                onClick={() => setShowCreateForm(!showCreateForm)}\n              >\n                {showCreateForm ? 'Cancel' : 'Create New Poll'}\n              </button>\n            </div>\n          ) : (\n            <div className=\"bg-slate-800 py-12 rounded-lg flex flex-col items-center\">\n              <h2 className=\"text-2xl font-semibold mb-4\">Welcome to Solana Dev Meetup Voting</h2>\n              <p className=\"text-center text-slate-400 mb-6 max-w-md\">\n                Connect your wallet to create polls and vote on project ideas for your next Solana dev meetup\n              </p>\n              <WalletMultiButton />\n            </div>\n          )}\n        </div>\n        \n        {/* Status Messages */}\n        {status && (\n          <div className={`p-4 rounded-lg mb-6 ${status.isError ? 'bg-red-900/30 text-red-300' : 'bg-green-900/30 text-green-300'}`}>\n            {status.message}\n          </div>\n        )}\n        \n        {/* Create Poll Form */}\n        {showCreateForm && publicKey && (\n          <div className=\"mb-8\">\n            <CreatePollForm onPollCreated={() => {\n              setShowCreateForm(false);\n              loadPolls();\n            }} />\n          </div>\n        )}\n        \n        {/* Polls List */}\n        {publicKey && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {loading && polls.length === 0 ? (\n              <div className=\"col-span-full text-center py-8 text-slate-400\">\n                Loading polls...\n              </div>\n            ) : polls.length > 0 ? (\n              polls.map((poll) => (\n                <PollCard \n                  key={poll.publicKey.toString()} \n                  poll={poll}\n                  onRefresh={loadPolls}\n                />\n              ))\n            ) : !loading && (\n              <div className=\"col-span-full text-center py-8 text-slate-400\">\n                No polls found. Create one to get started!\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </main>\n  );\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AAEA;AACA;AARA;;;;;;;;AAUe,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,iLAAA,CAAA,YAAS,AAAD;IAC9B,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,UAAgB,AAAD;IAEvD,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB,EAAE;IACpD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAErD,kCAAkC;IAClC,MAAM,YAAY;QAChB,IAAI,WAAW;YACb,MAAM,eAAe,MAAM;YAC3B,SAAS;QACX;IACF;IAEA,uDAAuD;IACvD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR;IACF,GAAG;QAAC;KAAU;IAEd,qBACE,8OAAC;QAAK,WAAU;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAO,WAAU;;sCAChB,8OAAC;4BAAG,WAAU;sCAAyH;;;;;;sCAGvI,8OAAC,+LAAA,CAAA,oBAAiB;;;;;;;;;;;8BAGpB,8OAAC;oBAAI,WAAU;8BACZ,0BACC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CACX,MAAM,MAAM,GAAG,IAAI,iBAAiB;;;;;;0CAEvC,8OAAC;gCACC,WAAU;gCACV,SAAS,IAAM,kBAAkB,CAAC;0CAEjC,iBAAiB,WAAW;;;;;;;;;;;6CAIjC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAG,WAAU;0CAA8B;;;;;;0CAC5C,8OAAC;gCAAE,WAAU;0CAA2C;;;;;;0CAGxD,8OAAC,+LAAA,CAAA,oBAAiB;;;;;;;;;;;;;;;;gBAMvB,wBACC,8OAAC;oBAAI,WAAW,CAAC,oBAAoB,EAAE,OAAO,OAAO,GAAG,+BAA+B,kCAAkC;8BACtH,OAAO,OAAO;;;;;;gBAKlB,kBAAkB,2BACjB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,oIAAA,CAAA,UAAc;wBAAC,eAAe;4BAC7B,kBAAkB;4BAClB;wBACF;;;;;;;;;;;gBAKH,2BACC,8OAAC;oBAAI,WAAU;8BACZ,WAAW,MAAM,MAAM,KAAK,kBAC3B,8OAAC;wBAAI,WAAU;kCAAgD;;;;;+BAG7D,MAAM,MAAM,GAAG,IACjB,MAAM,GAAG,CAAC,CAAC,qBACT,8OAAC,8HAAA,CAAA,UAAQ;4BAEP,MAAM;4BACN,WAAW;2BAFN,KAAK,SAAS,CAAC,QAAQ;;;;oCAK9B,CAAC,yBACH,8OAAC;wBAAI,WAAU;kCAAgD;;;;;;;;;;;;;;;;;;;;;;AAS7E","debugId":null}}]
}